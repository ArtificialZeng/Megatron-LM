# lawrence mcafee

# ~~~~~~~~ import ~~~~~~~~
# import faiss

# from lutil import pax

from .distrib import DistribIndex
from .faiss_decomp import FaissDecompIndex
from .faiss_mono import FaissMonoIndex

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
class IndexFactory:

    @classmethod
    def get_index_ty(cls, index_ty):
        return {
            "faiss-mono" : FaissMonoIndex,
            "faiss-decomp" : FaissDecompIndex,
            "distrib" : DistribIndex,
        }[index_ty]

    @classmethod
    # def init_index(index_str, nfeats):
    # def init_index(index_ty, index_str, nfeats):
    # def get_index(cls, index_ty, index_str, nfeats):
    def get_index(cls, args, index_ty, index_str, nfeats):
        index_ty = cls.get_index_ty(index_ty)
        index = index_ty(args, index_str, nfeats)
        return index

# eof
