# lawrence mcafee

import h5py
import numpy as np
import os

from lutil import pax

def mkdir(path):
    try:
        os.mkdir(path)
    except FileExistsError as e:
        pass

def make_sub_dir(top_path, sub_name):
    sub_path = os.path.join(top_path, sub_name)
    mkdir(sub_path)
    return sub_path

def save_data(data_map, dir_path, file_name):

    # pax({"data_map": data_map})

    path = os.path.join(dir_path, file_name)
    if not os.path.isfile(path):
        f = h5py.File(path, "w")
        # f.create_dataset("data", data = input_data)
        for k, v in data_map.items():
            f.create_dataset(k, data = v)
        f.close()

    return path

def load_data(path):

    f = h5py.File(path, "r")
    data_map = { k : np.copy(f[k]) for k in f.keys() }
    f.close()

    # pax({"data_map": data_map})

    return data_map

# eof
